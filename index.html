<!doctype html>
<html><head>
  <!--link rel="stylesheet" media="all" href="less.css"/-->
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <script src="public/jquery-1.6.4.min.js"></script>
  <script>
$(function(){

/*$.getJSON('/rpc/context').then(function(foo, bar, resp){
  var session = JSON.parse(resp.responseText);
  $('#hello').html('Hello, ' + (session.uid || 'guest') + '!');
});*/

});
  </script>
  <script src="public/sockjs.js"></script>
  <script>
    function log() {
      var args = Array.prototype.slice.call(arguments);
      for (var i = 0; i < args.length; ++i) {
        if (typeof console !== 'undefined') {
          console.log(args[i]);
        } else {
          alert(args[i]);
        }
      }
    }
(function(){
    //var conn = new SockJS('/echo');//, [], {debug: true});
    var conn = new SockJS('/echo', 'xhr-polling', {debug: true});
    //var conn = new SockJS('/echo', 'xhr-streaming', {debug: true});
    //var conn = new SockJS('/echo', 'websocket', {debug: true});
    //var conn = new SockJS('/echo', 'iframe-htmlfile', {debug: true});
    //var conn = new SockJS('/echo', 'iframe-eventsource', {debug: true});
    conn.onopen = function() {
      log(' [*] Open', this);
    };
    conn.onclose = function(reason) {
      log(' [*] Closed', this, arguments);
    };
    conn.onmessage = function(msg) {
      log(' [*] Message', this, arguments);
    };
    window.conn = conn;
})();
   </script>
</head>
<body>
<h2><a href="https://github.com/dvv/u-gotta-luvit">U-Gotta-Luvit</a> example</h2>
<h4><a style="text-align: right;" href="/rpc/auth">Perform auth to toggle sid cookie</a></h4>
<p id="hello">Hello, ${uid|Sunny World<script>alert(1)</script>}!</p>
<p id="caps"></p>
</body>
</html>
